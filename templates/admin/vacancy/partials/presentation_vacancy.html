{% load static %}
{% load custom_tags %}

<div class="container-fluid">
    <div class="card bg-white">
        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
            <p class="text-primary my-2 fs-4 fw-semibold">Vacante ID: {{ vacante.id }}</p>
        </div>
        <div class="card-body">
            <div class="row g-4">
                <div class="col-lg-8">

                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-4 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center">

                                {% if data.cliente.logo %}
                                    <img src="{{ data.cliente.logo }}" alt="Logo de {{ data.cliente.razon_social }}" class="me-3 mb-3 mb-md-0" style="width: 60px; height: 60px; object-fit: contain; border-radius: 0.5rem; border: 1px solid #eee;">
                                {% else %}
                                    <img src="https://placehold.co/100x100/b10022/ffffff?text={{ data.cliente.razon_social|slice:':2'|upper }}" alt="Logo de {{ data.cliente.razon_social }}" class="me-3 mb-3 mb-md-0" style="width: 60px; height: 60px; object-fit: contain; border-radius: 0.5rem; border: 1px solid #eee;">
                                {% endif %}

                                <div class="flex-grow-1">
                                    <h2 class="mb-1" style="font-weight: 700;">
                                        {{ vacante.cargo.nombre_cargo }}
                                    </h2>
                                    <p class="text-muted mb-0">
                                        <span class="material-symbols-outlined text-primary me-1" style="font-size: 18px; vertical-align: middle;">domain</span>
                                        <b class="text-primary">{{ data.cliente.razon_social }}</b>,&nbsp; &nbsp; 
                                        <span class="material-symbols-outlined text-primary me-1" style="font-size: 18px; vertical-align: middle;">map</span>
                                        <b>{{ vacante.perfil_vacante.lugar_trabajo.nombre }}</b>
                                        {% if vacante.perfil_vacante.barrio %} 
                                            ,&nbsp; &nbsp;
                                            <span class="material-symbols-outlined text-primary me-1" style="font-size: 18px; vertical-align: middle;">location_on</span>
                                            <b>{{ vacante.perfil_vacante.barrio }}</b>
                                        {% endif %}
                                    </p>
                                </div>

                                <div class="mt-3 mt-md-0">
                                    {% if vacante.estado_vacante == 1 %}
                                        <span class="badge bg-success-subtle text-success-emphasis rounded-pill" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <i class="bi bi-check-circle"></i> Activa
                                        </span>
                                    {% elif vacante.estado_vacante == 2 %}
                                        <span class="badge bg-warning-subtle text-warning-emphasis rounded-pill" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <i class="bi bi-clock"></i> En Proceso
                                        </span>
                                    {% elif vacante.estado_vacante == 3 %}
                                        <span class="badge bg-primary-subtle text-primary-emphasis rounded-pill" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <i class="bi bi-check2-all"></i> Finalizada
                                        </span>
                                    {% else %}
                                        <span class="badge bg-secondary-subtle text-secondary-emphasis rounded-pill" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <i class="bi bi-x-circle"></i> Cancelada
                                        </span>
                                    {% endif %}
                                </div>
                                
                            </div>
                        </div>
                    </div>

                    <!-- Información clave -->
                    <div class="d-flex flex-wrap gap-3 mb-4 pb-4 ">
                        <div class="p-3 bg-primary bg-opacity-10 rounded-3 text-center flex-grow-1">
                            <h6 class="text-muted small mb-1" style="font-weight: 700;">Salario (COP)</h6>
                            <p class="h5 mb-0" style="font-weight: 700;">
                                {% if vacante.perfil_vacante.salario %}
                                    ${{ vacante.perfil_vacante.salario|format_number }}
                                    {% if vacante.perfil_vacante.salario_adicional %}
                                        - $ {{ vacante.perfil_vacante.salario_adicional|format_number }}
                                    {% endif %}
                                {% else %}
                                    A convenir
                                {% endif %}
                            </p>
                        </div>
                        <div class="p-3 bg-primary bg-opacity-10 rounded-3 text-center flex-grow-1">
                            <h6 class="text-muted small mb-1" style="font-weight: 700;">Contrato</h6>
                            <p class="h5 mb-0" style="font-weight: 700;">
                                {% if vacante.perfil_vacante.termino_contrato == 'F' %}
                                    Fijo
                                {% elif vacante.perfil_vacante.termino_contrato == 'I' %}
                                    Indefinido
                                {% elif vacante.perfil_vacante.termino_contrato == 'O' %}
                                    Obra Labor
                                {% else %}
                                    Sin especificar
                                {% endif %}
                            </p>
                        </div>
                        <div class="p-3 bg-primary bg-opacity-10 rounded-3 text-center flex-grow-1">
                            <h6 class="text-muted small mb-1" style="font-weight: 700;">Modalidad</h6>
                            <p class="h5 mb-0" style="font-weight: 700;">
                                {% if vacante.perfil_vacante.modalidad == 'R' %}
                                    Remoto
                                {% elif vacante.perfil_vacante.modalidad == 'P' %}
                                    Presencial
                                {% elif vacante.perfil_vacante.modalidad == 'H' %}
                                    Híbrido
                                {% else %}
                                    Sin especificar
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <!-- Descripción del cargo -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">description</span>
                                DESCRIPCION DEL CARGO
                            </p>
                        </div>
                        <div class="card-body">
                            <p class="text-secondary" style="text-align: justify;">
                                {% if vacante.descripcion_vacante %}
                                    {{ vacante.descripcion_vacante }}
                                {% else %}
                                    No hay descripción disponible para esta vacante.
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <!-- Responsabilidades del cargo -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">checklist</span>
                                RESPONSABILIDADES DEL CARGO
                            </p>
                        </div>
                        <div class="card-body">
                            {% if vacante.perfil_vacante.funciones_responsabilidades %}
                            <ul class="list-unstyled text-secondary">
                                {% for funcion in vacante.perfil_vacante.funciones_responsabilidades %}
                                <li><span class="material-symbols-outlined text-primary me-1" style="font-size: 18px; vertical-align: middle;">check</span>{{ funcion.funcion }}</li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Experiencia para el cargo -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">work_history</span>
                                EXPERIENCIA LABORAL REQUERIDA
                            </p>
                        </div>
                        <div class="card-body">
                            {% if vacante.perfil_vacante.experiencia_laboral %}
                                {% with exp_list=vacante.perfil_vacante.experiencia_laboral %}
                                    {% if exp_list %}
                                        <ul class="list-unstyled text-secondary">
                                            {% for exp in exp_list %}
                                                <li class="mb-2">
                                                    <span class="material-symbols-outlined text-primary me-1" style="font-size: 18px; vertical-align: middle;">work</span>
                                                    </span>
                                                    {% if exp.tiempo_experiencia == "1" %}
                                                        1 año
                                                    {% else %}
                                                        {{ exp.tiempo_experiencia }} años
                                                    {% endif %}
                                                    en {{ exp.experiencia_especifica }}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% else %}
                                        <span class="text-muted fst-italic">No hay experiencia laboral específica registrada para esta vacante.</span>
                                    {% endif %}
                                {% endwith %}
                            {% else %}
                                <span class="text-muted fst-italic">No hay experiencia laboral específica registrada para esta vacante.</span>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Estudios -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">school</span>
                                ESTUDIOS
                            </p>
                        </div>
                        <div class="card-body">
                            {% if vacante.perfil_vacante.tipo_profesion == 'E' %}
                            <div class="mb-3">
                                <span class="text-secondary">Se requiere que tenga titulo de <strong>{{ vacante.perfil_vacante.get_nivel_estudio_display }}</strong> en: <strong>{{ vacante.perfil_vacante.profesion_estudio.nombre }}</strong></span>
                                <div class="mt-2">
                                    <span class="badge bg-primary-subtle text-primary-emphasis" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                        <i class="bi bi-award me-1"></i>Profesión Específica
                                    </span>
                                </div>
                            </div>
                            {% elif vacante.perfil_vacante.tipo_profesion == 'G' %}
                                <div class="mb-3">
                                    <span class="text-secondary">Se requiere que tenga titulo de <strong>{{ vacante.perfil_vacante.get_nivel_estudio_display }}</strong> en este grupo de profesiones: <strong>{{ vacante.perfil_vacante.grupo_profesion.nombre }}</strong></span>
                                    <div class="mt-2">
                                        <span class="badge bg-success-subtle text-success-emphasis" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <i class="bi bi-collection me-1"></i>Grupo de Profesiones
                                        </span>
                                    </div>
                                    {% if vacante.perfil_vacante.tipo_profesion == 'G' and vacante.perfil_vacante.grupo_profesion %}
                                        <div class="mt-3">
                                            <div class="d-flex flex-wrap gap-2">
                                                {% for profesion in vacante.perfil_vacante.grupo_profesion.profesiones %}
                                                    <span class="badge bg-info-subtle text-info-emphasis border border-info-subtle" style="font-size: 0.85rem; font-weight: 500; padding: 0.6em 1em; border-radius: 0.5rem;">
                                                        <i class="bi bi-mortarboard-fill me-1"></i>{{ profesion.nombre }}
                                                    </span>
                                                {% empty %}
                                                    <span class="text-muted fst-italic">No hay profesiones registradas en este grupo.</span>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            {% elif vacante.perfil_vacante.tipo_profesion == 'L' %}
                                <div class="mb-3">
                                    <span class="text-secondary">Se requiere que tenga titulo de <strong>{{ vacante.perfil_vacante.get_nivel_estudio_display }}</strong> en este listado de profesiones:</span>
                                    <div class="mt-2">
                                        <span class="badge bg-success-subtle text-success-emphasis" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <i class="bi bi-collection me-1"></i>Listado de Profesiones
                                        </span>
                                    </div>
                                    {% if vacante.perfil_vacante.profesion_estudio_listado %}
                                        <div class="mt-3">
                                            <div class="d-flex flex-wrap gap-2">
                                                {% for profesion in vacante.perfil_vacante.profesion_estudio_listado|parse_profesiones_json %}
                                                    <span class="badge bg-info-subtle text-info-emphasis border border-info-subtle" style="font-size: 0.85rem; font-weight: 500; padding: 0.6em 1em; border-radius: 0.5rem;">
                                                        <i class="bi bi-mortarboard-fill me-1"></i>{{ profesion }}
                                                    </span>
                                                {% empty %}
                                                    <span class="text-muted fst-italic">No hay profesiones seleccionadas en el listado.</span>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                </div>

                <div class="col-lg-4">
                    <!-- Información del cliente -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-4 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0">
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">business</span>
                                INFORMACIÓN DEL CLIENTE
                            </p>
                        </div>
                        <div class="card-body">
                            {% if data.cliente %}
                                <div class="mb-3">
                                    <div>
                                        {% if data.cliente.razon_social %}
                                            <h5 class="mb-1 fw-bold" style="font-size: 1.15rem;">
                                                {{ data.cliente.razon_social }}
                                            </h5>
                                        {% endif %}
                                        {% if data.cliente.ciudad %}
                                            <div class="text-secondary small mb-1">
                                                {{ data.cliente.ciudad }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% if data.cliente.perfil_empresarial %}
                                        <div class="mt-2">
                                            <span class="fw-semibold text-dark">Perfil/Descripción:</span>
                                            <span class="text-secondary">{{ data.cliente.perfil_empresarial }}</span>
                                        </div>
                                    {% endif %}
                                </div>
                                <button type="button" class="btn bg-primary text-primary bg-opacity-10 w-100 mb-3" data-bs-toggle="modal" data-bs-target="#modalInfoCliente">
                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">info</span>
                                    Ver información del cliente
                                </button>

                                <!-- Modal -->
                                <div class="modal fade" id="modalInfoCliente" tabindex="-1" aria-labelledby="modalInfoClienteLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-xl">
                                        <div class="modal-content rounded-4 shadow" style="margin: 18px;">
                                            <!-- Cabecera tipo header con logo y datos principales -->
                                            <div class="modal-header bg-primary bg-opacity-10 border-0 rounded-top-4" style="margin-bottom: 0.5rem;">
                                                <div class="container-fluid">
                                                    <div class="row align-items-center g-3">
                                                        {% if data.cliente.logo %}
                                                        <div class="col-auto d-flex align-items-center justify-content-center">
                                                            <img src="{{ data.cliente.logo }}" alt="Logo {{ data.cliente.razon_social }}" class="rounded-circle border border-2 border-primary" style="width: 80px; height: 80px; object-fit: cover;">
                                                        </div>
                                                        {% endif %}
                                                        <div class="col">
                                                            <h4 class="modal-title text-primary fw-bold d-flex align-items-center gap-2 mb-1" id="modalInfoClienteLabel" style="font-size: 1.5rem;">
                                                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 28px; color: #d32f2f;">business</span>
                                                                {{ data.cliente.razon_social }}
                                                            </h4>
                                                            <div class="d-flex flex-wrap gap-3">
                                                                <div class="d-flex align-items-center text-secondary small me-3">
                                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px; color: #d32f2f;">location_on</span>
                                                                    {{ data.cliente.ciudad }}
                                                                </div>
                                                                {% if data.cliente.estado %}
                                                                <div class="d-flex align-items-center text-secondary small me-3">
                                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px; color: #d32f2f;">flag</span>
                                                                    {{ data.cliente.estado }}
                                                                </div>
                                                                {% endif %}
                                                                <div class="d-flex align-items-center text-secondary small me-3">
                                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px; color: #d32f2f;">badge</span>
                                                                    NIT: <span class="ms-1">{{ data.cliente.nit }}</span>
                                                                </div>
                                                                {% if data.cliente.tipo_cliente %}
                                                                <div class="d-flex align-items-center text-secondary small me-3">
                                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px; color: #d32f2f;">category</span>
                                                                    {{ data.cliente.tipo_cliente }}
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="col-auto">
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Fin cabecera tipo header -->

                                            <div class="modal-body" style="margin: 0.5rem 1.2rem;">
                                                <div class="row g-4">
                                                    <div class="col-md-6">
                                                        <ul class="list-group list-group-flush mb-3">
                                                            {% if data.cliente.actividad_economica %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">work</span>
                                                                <span class="fw-bold me-1">Actividad Económica:</span>
                                                                <span>{{ data.cliente.actividad_economica }}</span>
                                                            </li>
                                                            {% endif %}
                                                            {% if data.cliente.direccion %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">home_pin</span>
                                                                <span class="fw-bold me-1">Dirección:</span>
                                                                <span>{{ data.cliente.direccion }}</span>
                                                            </li>
                                                            {% endif %}
                                                            {% if data.cliente.contacto %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">person</span>
                                                                <span class="fw-bold me-1">Contacto:</span>
                                                                <span>{{ data.cliente.contacto }}</span>
                                                                {% if data.cliente.cargo %}
                                                                    <span class="badge bg-primary-subtle text-primary-emphasis ms-2" style="font-size: 0.85em;">{{ data.cliente.cargo }}</span>
                                                                {% endif %}
                                                            </li>
                                                            {% endif %}
                                                            {% if data.cliente.telefono %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">call</span>
                                                                <span class="fw-bold me-1">Teléfono:</span>
                                                                <span>{{ data.cliente.telefono }}</span>
                                                            </li>
                                                            {% endif %}
                                                            {% if data.cliente.email %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">mail</span>
                                                                <span class="fw-bold me-1">Email:</span>
                                                                <span>{{ data.cliente.email }}</span>
                                                            </li>
                                                            {% endif %}
                                                        </ul>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <ul class="list-group list-group-flush mb-3">
                                                            {% if data.cliente.referencias_laborales %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">assignment_ind</span>
                                                                <span class="fw-bold me-1">Referencias Laborales:</span>
                                                                <span>{{ data.cliente.referencias_laborales }}</span>
                                                            </li>
                                                            {% endif %}
                                                            {% if data.cliente.cantidad_colaboradores %}
                                                            <li class="list-group-item border-0 px-0 mb-2 d-flex align-items-center">
                                                                <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">groups</span>
                                                                <span class="fw-bold me-1">Colaboradores:</span>
                                                                <span>{{ data.cliente.cantidad_colaboradores }}</span>
                                                            </li>
                                                            {% endif %}
                                                        </ul>
                                                        {% if data.cliente.perfil_empresarial %}
                                                        <div class="mb-2 d-flex align-items-start">
                                                            <span class="material-symbols-outlined align-middle me-2" style="font-size: 22px; color: #d32f2f;">description</span>
                                                            <div>
                                                                <span class="fw-semibold text-dark">Perfil/Descripción:</span>
                                                                <span class="text-secondary d-block">{{ data.cliente.perfil_empresarial }}</span>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer border-0 rounded-bottom-4" style="margin: 0 1.2rem 1rem 1.2rem;">
                                                <button type="button" class="btn bg-primary text-primary bg-opacity-10" data-bs-dismiss="modal">
                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 18px; color: #d32f2f;">close</span>
                                                    Cerrar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% else %}
                                <span class="text-muted fst-italic">No hay información del cliente registrada para esta vacante.</span>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Horarios -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">schedule</span>
                                HORARIOS
                            </p>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Horarios de trabajo que requieren esta vacante.</p>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                {% if vacante.perfil_vacante.horario %}
                                    <ul class="list-group list-group-flush">
                                        {% for horario in vacante.perfil_vacante.horario|parse_horarios_json %}
                                            <li class="list-group-item">
                                                <b>{{ horario.rango_dias }}</b>
                                                <span class="badge bg-primary bg-opacity-10 text-primary float-end" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 18px;">schedule</span>
                                                    {{ horario.hora_inicio }} - {{ horario.hora_final }}
                                                </span>
                                            </li>
                                        {% empty %}
                                            <span class="text-muted fst-italic">No hay horarios específicos registrados para esta vacante.</span>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <span class="text-muted fst-italic">No hay horarios específicos registrados para esta vacante.</span>
                                {% endif %}
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Estudios complementarios -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">workspace_premium</span>
                                ESTUDIOS COMPLEMENTARIOS
                            </p>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Estudios o conocimientos complementarios que requieren esta vacante.</p>
                            {% if vacante.perfil_vacante.estudio_complementario %}
                            <ul class="list-group list-group-flush">
                                {% for estudio in vacante.perfil_vacante.estudio_complementario %}
                                <li class="list-group-item"> <b>{{ estudio.estudio|upper }}</b> 
                                    {% if estudio.certificado == "True" or estudio.certificado == True %}
                                        <span class="badge bg-success-subtle text-success float-end" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                            <span class="material-symbols-outlined align-middle me-1" style="font-size: 18px;">verified</span>Certificado
                                        </span>
                                    {% else %}
                                        
                                    {% endif %}
                                </li>
                                {% endfor %}
                            </ul>
                            {% else %}
                                <span class="text-muted fst-italic">No hay estudios complementarios registrados para esta vacante.</span>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Idiomas -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">translate</span>
                                IDIOMAS
                            </p>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Idiomas que requieren esta vacante.</p>
                            {% if vacante.perfil_vacante.idiomas %}
                            <ul class="list-group list-group-flush">
                                {% for idioma in vacante.perfil_vacante.idiomas %}
                                <li class="list-group-item">
                                    <div class="d-flex align-items-start">
                                        <span class="material-symbols-outlined text-primary me-2 mt-1" style="font-size: 20px;">translate</span>
                                        <div>
                                            <span class="fw-bold d-block mb-1">
                                                {# Mostrar nombre del idioma en texto, no solo el código #}
                                                {% if idioma.idioma == "ES" %}
                                                    Español
                                                {% elif idioma.idioma == "EN" %}
                                                    Inglés
                                                {% elif idioma.idioma == "FR" %}
                                                    Francés
                                                {% elif idioma.idioma == "DE" %}
                                                    Alemán
                                                {% elif idioma.idioma == "IT" %}
                                                    Italiano
                                                {% elif idioma.idioma == "PT" %}
                                                    Portugués
                                                {% elif idioma.idioma == "RU" %}
                                                    Ruso
                                                {% elif idioma.idioma == "ZH" %}
                                                    Chino
                                                {% elif idioma.idioma == "JP" %}
                                                    Japonés
                                                {% elif idioma.idioma == "AR" %}
                                                    Árabe
                                                {% else %}
                                                    {{ idioma.idioma|upper }}
                                                {% endif %}
                                            </span>
                                            <span class="text-secondary" style="font-size: 0.98rem;">
                                                Nivel: {{ idioma.nivel }}
                                                
                                            </span>
                                            {% if idioma.nivel_idioma == "1" %}
                                                <span class="badge bg-success-subtle text-success ms-2" style="font-size: 0.8rem; font-weight: 600; padding: 0.5em 0.9em;">
                                                    <span class="material-symbols-outlined align-middle me-1" style="font-size: 18px;">verified</span>Certificado
                                                </span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                            {% else %}
                                <span class="text-muted fst-italic">No hay idiomas registrados para esta vacante.</span>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Habilidades -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0"> 
                            <p class="text-primary my-2 fs-6 fw-semibold">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">work</span>
                                HABILIDADES
                            </p>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Habilidades que requieren esta vacante.</p>
                            {% if vacante.habilidades.all %}
                                <ul class="list-unstyled">
                                    {% for habilidad in vacante.habilidades.all %}
                                        <li class="mb-2">
                                            <span class="badge bg-info bg-opacity-10 text-info-emphasis border border-info-subtle" style="font-size: 0.85rem; font-weight: 500; padding: 0.6em 1em; border-radius: 0.5rem;">
                                                {{ habilidad.nombre }}
                                            </span>
                                        </li>
                                    {% empty %}
                                        <li>
                                            <span class="text-muted fst-italic">No hay habilidades registradas para esta vacante.</span>
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <span class="text-muted fst-italic">No hay habilidades registradas para esta vacante.</span>
                            {% endif %}
                        </div>
                        
                    </div>

                    <!-- Tarjeta de estadísticas de la vacante -->
                    <div class="card bg-white border-1 border-primary border-opacity-25 rounded-3 mb-2 shadow-sm">
                        <div class="card-header bg-primary bg-opacity-10 align-middle border-0">
                            <p class="text-primary my-2 fs-6 fw-semibold mb-0">
                                <span class="material-symbols-outlined align-middle me-1" style="font-size: 20px;">bar_chart</span>
                                Estadísticas de la Vacante
                            </p>
                        </div>
                        <div class="card-body">
                            <div class="row g-0">
                                <div class="col-12">
                                    <div class="table-responsive">
                                        <table class="table table-borderless align-middle mb-0" style="background: #f8fafc; border-radius: 0.75rem; overflow: hidden;">
                                            <tbody>
                                                <tr>
                                                    <td class="py-3 px-4" style="width: 60%;">
                                                        <div class="d-flex align-items-center">
                                                            <span class="material-symbols-outlined text-danger me-2" style="font-size: 28px;">group</span>
                                                            <span class="fw-normal">Posiciones</span>
                                                        </div>
                                                    </td>
                                                    <td class="py-3 px-4 text-end" style="width: 40%;">
                                                        <span class="fw-semibold">{{ vacante.numero_posiciones }}</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="py-3 px-4">
                                                        <div class="d-flex align-items-center">
                                                            <span class="material-symbols-outlined text-danger me-2" style="font-size: 28px;">person_search</span>
                                                            <span class="fw-normal">A Presentar</span>
                                                        </div>
                                                    </td>
                                                    <td class="py-3 px-4 text-end">
                                                        <span class="fw-semibold">{{ vacante.cantidad_presentar|default:"N/A" }}</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="py-3 px-4">
                                                        <div class="d-flex align-items-center">
                                                            <span class="material-symbols-outlined text-danger me-2" style="font-size: 28px;">calendar_month</span>
                                                            <span class="fw-normal">Creada</span>
                                                        </div>
                                                    </td>
                                                    <td class="py-3 px-4 text-end">
                                                        <span class="fw-semibold">{{ vacante.fecha_creacion|date:"d/m/Y" }}</span>
                                                    </td>
                                                </tr>
                                                {% if vacante.fecha_cierre %}
                                                <tr>
                                                    <td class="py-3 px-4">
                                                        <div class="d-flex align-items-center">
                                                            <span class="material-symbols-outlined text-danger me-2" style="font-size: 28px;">event_busy</span>
                                                            <span class="fw-normal">Cierre</span>
                                                        </div>
                                                    </td>
                                                    <td class="py-3 px-4 text-end">
                                                        <span class="fw-semibold">{{ vacante.fecha_cierre|date:"d/m/Y" }}</span>
                                                    </td>
                                                </tr>
                                                {% endif %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="card-footer bg-white text-center p-3">
            <a href="{% url 'vacantes:vacantes_editar_propias' data.cliente.id vacante.id %}" class="btn bg-primary text-primary bg-opacity-10 px-5 me-2" style="font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 0.5rem;">
                <span class="material-symbols-outlined align-middle me-2" style="font-size: 20px;">edit</span>Editar Vacante
            </a>
            <button class="btn bg-info text-info bg-opacity-10" style="font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 0.5rem;">
                <span class="material-symbols-outlined align-middle me-2" style="font-size: 20px;">download</span>Exportar Datos
            </button>
        </div>
    </div>
</div>